namespace cctn
{

namespace
{
//==============================================================================
const std::vector<MoraKana> kMoraKana = {
    juce::CharPointer_UTF8("\xe3\x82\xa1"),
    juce::CharPointer_UTF8("\xe3\x82\xa2"),
    juce::CharPointer_UTF8("\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xa4"),
    juce::CharPointer_UTF8("\xe3\x82\xa4\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xa5"),
    juce::CharPointer_UTF8("\xe3\x82\xa6"),
    juce::CharPointer_UTF8("\xe3\x82\xa6\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xa6\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xa6\xe3\x82\xa9"),
    juce::CharPointer_UTF8("\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xa8"),
    juce::CharPointer_UTF8("\xe3\x82\xa9"),
    juce::CharPointer_UTF8("\xe3\x82\xaa"),
    juce::CharPointer_UTF8("\xe3\x82\xab"),
    juce::CharPointer_UTF8("\xe3\x82\xac"),
    juce::CharPointer_UTF8("\xe3\x82\xad"),
    juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xae"),
    juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xaf"),
    juce::CharPointer_UTF8("\xe3\x82\xaf\xe3\x83\xae"),
    juce::CharPointer_UTF8("\xe3\x82\xb0"),
    juce::CharPointer_UTF8("\xe3\x82\xb0\xe3\x83\xae"),
    juce::CharPointer_UTF8("\xe3\x82\xb1"),
    juce::CharPointer_UTF8("\xe3\x82\xb2"),
    juce::CharPointer_UTF8("\xe3\x82\xb3"),
    juce::CharPointer_UTF8("\xe3\x82\xb4"),
    juce::CharPointer_UTF8("\xe3\x82\xb5"),
    juce::CharPointer_UTF8("\xe3\x82\xb6"),
    juce::CharPointer_UTF8("\xe3\x82\xb7"),
    juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xb8"),
    juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x82\xb9"),
    juce::CharPointer_UTF8("\xe3\x82\xb9\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xba"),
    juce::CharPointer_UTF8("\xe3\x82\xba\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x82\xbb"),
    juce::CharPointer_UTF8("\xe3\x82\xbc"),
    juce::CharPointer_UTF8("\xe3\x82\xbd"),
    juce::CharPointer_UTF8("\xe3\x82\xbe"),
    juce::CharPointer_UTF8("\xe3\x82\xbf"),
    juce::CharPointer_UTF8("\xe3\x83\x80"),
    juce::CharPointer_UTF8("\xe3\x83\x81"),
    juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x82"),
    juce::CharPointer_UTF8("\xe3\x83\x83"),
    juce::CharPointer_UTF8("\xe3\x83\x84"),
    juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa1"),
    juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa9"),
    juce::CharPointer_UTF8("\xe3\x83\x85"),
    juce::CharPointer_UTF8("\xe3\x83\x86"),
    juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x87"),
    juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x88"),
    juce::CharPointer_UTF8("\xe3\x83\x88\xe3\x82\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x89"),
    juce::CharPointer_UTF8("\xe3\x83\x89\xe3\x82\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x8a"),
    juce::CharPointer_UTF8("\xe3\x83\x8b"),
    juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x8c"),
    juce::CharPointer_UTF8("\xe3\x83\x8d"),
    juce::CharPointer_UTF8("\xe3\x83\x8e"),
    juce::CharPointer_UTF8("\xe3\x83\x8f"),
    juce::CharPointer_UTF8("\xe3\x83\x90"),
    juce::CharPointer_UTF8("\xe3\x83\x91"),
    juce::CharPointer_UTF8("\xe3\x83\x92"),
    juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x93"),
    juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x94"),
    juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x95"),
    juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa1"),
    juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa9"),
    juce::CharPointer_UTF8("\xe3\x83\x96"),
    juce::CharPointer_UTF8("\xe3\x83\x97"),
    juce::CharPointer_UTF8("\xe3\x83\x98"),
    juce::CharPointer_UTF8("\xe3\x83\x99"),
    juce::CharPointer_UTF8("\xe3\x83\x9a"),
    juce::CharPointer_UTF8("\xe3\x83\x9b"),
    juce::CharPointer_UTF8("\xe3\x83\x9c"),
    juce::CharPointer_UTF8("\xe3\x83\x9d"),
    juce::CharPointer_UTF8("\xe3\x83\x9e"),
    juce::CharPointer_UTF8("\xe3\x83\x9f"),
    juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\xa0"),
    juce::CharPointer_UTF8("\xe3\x83\xa1"),
    juce::CharPointer_UTF8("\xe3\x83\xa2"),
    juce::CharPointer_UTF8("\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\xa4"),
    juce::CharPointer_UTF8("\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\xa6"),
    juce::CharPointer_UTF8("\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\xa8"),
    juce::CharPointer_UTF8("\xe3\x83\xa9"),
    juce::CharPointer_UTF8("\xe3\x83\xaa"),
    juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\xab"),
    juce::CharPointer_UTF8("\xe3\x83\xac"),
    juce::CharPointer_UTF8("\xe3\x83\xad"),
    juce::CharPointer_UTF8("\xe3\x83\xae"),
    juce::CharPointer_UTF8("\xe3\x83\xaf"),
    juce::CharPointer_UTF8("\xe3\x83\xb0"),
    juce::CharPointer_UTF8("\xe3\x83\xb1"),
    juce::CharPointer_UTF8("\xe3\x83\xb2"),
    juce::CharPointer_UTF8("\xe3\x83\xb3"),
    juce::CharPointer_UTF8("\xe3\x83\xb4"),
    juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa1"),
    juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa9"),
    juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x83\xa3"),
    juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x83\xa5"),
    juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x83\xa7"),
    juce::CharPointer_UTF8("\xe3\x83\xb6")
};

const std::map<MoraKana, MoraPhoneme> kMapMoraKanaToMoraPhonemeMinimum = {
    { juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa9"), { "v", "o"}},
    { juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa7"), { "v", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa3"), { "v", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x82\xa1"), { "v", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb4"), { "v", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb3"), {std::nullopt, "N"} },
    { juce::CharPointer_UTF8("\xe3\x83\xaf"), { "w", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\xad"), { "r", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\xac"), { "r", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\xab"), { "r", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x83\xa7"), { "ry", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x83\xa5"), { "ry", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x83\xa3"), { "ry", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\xaa\xe3\x82\xa7"), { "ry", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\xaa"), { "r", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa9"), { "r", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa8"), { "y", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa6"), { "y", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa4"), { "y", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa2"), { "m", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa1"), { "m", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa0"), { "m", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x83\xa7"), { "my", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x83\xa5"), { "my", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x83\xa3"), { "my", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9f\xe3\x82\xa7"), { "my", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9f"), { "m", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9e"), { "m", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9d"), { "p", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9c"), { "b", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9b"), { "h", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x9a"), { "p", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x99"), { "b", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x98"), { "h", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x97"), { "p", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x96"), { "b", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa9"), { "f", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa7"), { "f", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa3"), { "f", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x95\xe3\x82\xa1"), { "f", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x95"), { "f", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x83\xa7"), { "py", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x83\xa5"), { "py", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x83\xa3"), { "py", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x94\xe3\x82\xa7"), { "py", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x94"), { "p", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x83\xa7"), { "by", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x83\xa5"), { "by", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x83\xa3"), { "by", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x93\xe3\x82\xa7"), { "by", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x93"), { "b", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x83\xa7"), { "hy", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x83\xa5"), { "hy", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x83\xa3"), { "hy", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x92\xe3\x82\xa7"), { "hy", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x92"), { "h", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x91"), { "p", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x90"), { "b", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8f"), { "h", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8e"), { "n", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8d"), { "n", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8c"), { "n", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x83\xa7"), { "ny", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x83\xa5"), { "ny", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x83\xa3"), { "ny", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8b\xe3\x82\xa7"), { "ny", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8b"), { "n", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x8a"), { "n", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x89\xe3\x82\xa5"), { "d", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x89"), { "d", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x88\xe3\x82\xa5"), { "t", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x88"), { "t", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x83\xa7"), { "dy", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x83\xa5"), { "dy", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x83\xa3"), { "dy", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x82\xa7"), { "dy", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x87\xe3\x82\xa3"), { "d", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x87"), { "d", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x83\xa7"), { "ty", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x83\xa5"), { "ty", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x83\xa3"), { "ty", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x86\xe3\x82\xa3"), { "t", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x86"), { "t", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa9"), { "ts", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa7"), { "ts", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa3"), { "ts", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x84\xe3\x82\xa1"), { "ts", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x84"), { "ts", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x83"), {std::nullopt, "cl"} },
    { juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x83\xa7"), { "ch", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x83\xa5"), { "ch", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x83\xa3"), { "ch", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\x81\xe3\x82\xa7"), { "ch", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\x81"), { "ch", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\x80"), { "d", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xbf"), { "t", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xbe"), { "z", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xbd"), { "s", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xbc"), { "z", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xbb"), { "s", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xba\xe3\x82\xa3"), { "z", "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xba"), { "z", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb9\xe3\x82\xa3"), { "s", "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb9"), { "s", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x83\xa7"), { "j", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x83\xa5"), { "j", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x83\xa3"), { "j", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb8\xe3\x82\xa7"), { "j", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb8"), { "j", "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x83\xa7"), { "sh", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x83\xa5"), { "sh", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x83\xa3"), { "sh", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb7\xe3\x82\xa7"), { "sh", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb7"), { "sh", "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb6"), { "z", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb5"), { "s", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb4"), { "g", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb3"), { "k", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb2"), { "g", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb1"), { "k", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb0\xe3\x83\xae"), { "gw", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xb0"), { "g", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xaf\xe3\x83\xae"), { "kw", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xaf"), { "k", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x83\xa7"), { "gy", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x83\xa5"), { "gy", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x83\xa3"), { "gy", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xae\xe3\x82\xa7"), { "gy", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xae"), { "g", "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x83\xa7"), { "ky", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x83\xa5"), { "ky", "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x83\xa3"), { "ky", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xad\xe3\x82\xa7"), { "ky", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xad"), { "k", "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xac"), { "g", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xab"), { "k", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xaa"), {std::nullopt, "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa8"), {std::nullopt, "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa6\xe3\x82\xa9"), { "w", "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa6\xe3\x82\xa7"), { "w", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa6\xe3\x82\xa3"), { "w", "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa6"), {std::nullopt, "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa4\xe3\x82\xa7"), { "y", "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa4"), { std::nullopt, "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa2"), { std::nullopt, "a"} }
};

const std::map<MoraKana, MoraPhoneme> kMapMoraKanaToMoraPhonemeAdditional = {
    { juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x83\xa7"), { "by", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x83\xa5"), { "by", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb4\xe3\x83\xa3"), { "by", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb2"), { std::nullopt, "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb1"), { std::nullopt, "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb0"), { std::nullopt, "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\xae"), { "w", "a"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa7"), { "y", "o"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa5"), { "y", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x85"), { "z", "u"} },
    { juce::CharPointer_UTF8("\xe3\x83\x82"), { "j", "i"} },
    { juce::CharPointer_UTF8("\xe3\x83\xb6"), { "k", "e"} },
    { juce::CharPointer_UTF8("\xe3\x83\xa3"), { "y", "a"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa9"), { std::nullopt, "o"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa7"), { std::nullopt, "e"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa5"), { std::nullopt, "u"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa3"), { std::nullopt, "i"} },
    { juce::CharPointer_UTF8("\xe3\x82\xa1"), { std::nullopt, "a"} }
};

} // namespace

//==============================================================================
StaticMoraMapping::StaticMoraMapping()
{
    initialize();
}

StaticMoraMapping::~StaticMoraMapping()
{
    mapMoraKanaToMoraPhoneme.clear();
}

void StaticMoraMapping::initialize()
{
    mapMoraKanaToMoraPhoneme = kMapMoraKanaToMoraPhonemeMinimum;
    mapMoraKanaToMoraPhoneme.insert(
        kMapMoraKanaToMoraPhonemeAdditional.begin(),
        kMapMoraKanaToMoraPhonemeAdditional.end()
    );
}

//==============================================================================
std::optional<MoraPhoneme> StaticMoraMapping::convertMoraKanaToMoraPhonemes(const MoraKana& moraKana) const
{
    if(mapMoraKanaToMoraPhoneme.count(moraKana) > 0)
    {
        return mapMoraKanaToMoraPhoneme.at(moraKana);
    }
    return std::nullopt;
}

const std::map<MoraKana, MoraPhoneme>& StaticMoraMapping::getMoraMapping() const
{
    return mapMoraKanaToMoraPhoneme;
}

} // namespace cctn
